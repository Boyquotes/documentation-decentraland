---
date: 2022-06-29
title: Debug in preview
description: How you can debug your scene while running it locally in preview
categories:
  - development-guide
type: Document
url: /creator/development-guide/sdk7/debug-in-preview/
weight: 1
---

Running a preview provides some useful debugging information and tools to help you understand how the scene is rendered. The preview mode provides indicators that show parcel boundaries and the orientation of the scene.

If the scene can't be compiled, you'll just see the grid on the ground, with nothing rendered on it.

If this occurs, there are several places where you can look for error messages to help you understand what went wrong:

1. Check your code editor to make sure that it didn't mark any syntax or logic errors.
2. Check the output of the command line where you ran `npm run start`
3. Check the JavaScript console in the browser for any other error messages. For example, when using Chrome you access this through `View > Developer > JavaScript console`.
4. If you're running a preview of a multiplayer scene that runs together with a local server, check the output of the command line window where you run the local server.

If an entity is located or extends beyond the limits of the scene, it will be displayed in red to indicate this, with a red bounding box to mark its boundaries. Nothing in your scene can extend beyond the scene limits. This won't stop the scene from being rendered locally, but it will stop the offending entities form being rendered in Decentraland.

{{< hint info >}}
**ðŸ’¡ Tip**: Before you deploy your scene to the production environment, deploy it to the test environment to try it in a context that is a lot closer to production. See [Development Workflow]({{< ref "/content/creator/sdk7/getting-started/dev-workflow.md#deploy-to-the-test-environment">}})
{{< /hint >}}

## Use the console

Output messages to console (using `console.log()`). You can then view these messages as they are generated by opening the JavaScript console of your browser. For example, when using Chrome you access this through `View > Developer > JavaScript console`.

You can also add `debugger` commands or use the `sources` tab in the developer tools menu to add breakpoints and pause execution while you interact with the scene in real time.

When in preview, the console doesn't display messages from the engine. These are often not relevant to your scene, but if you need to see them add the following parameter to the URL:

`&DEBUG_LOGS`

Once you deploy the scene, you won't be able to see the messages printed to console when you visit the scene in-world. If you need to check these messages on the deployed scene, you can turn the scene's console messages back on adding the following parameter to the URL:

`DEBUG_SCENE_LOG`.

## Add breakpoints in the VS Code Extension

Using VS Studio Code, you can add breakpoints to your scene's code. When running a preview, whenever the code passes through these breakpoints, it pauses execution. A **Debug** panel opens, showing the current values of all variables at that point in time.

This is especially useful to validate that the data at a given point in time is what you expect. You can also modify the values of any variable manually and resume execution with the blue play button, using those new variables. This is great to test corner cases, to make sure the scene behaves as expected on every scenario, which might otherwise be a lot harder to reproduce.

Make sure you've [installed the Decentraland VS Code Extension]({{< ref "/content/creator/sdk7/getting-started/installation-guide.md#vs-code-extension" >}}).

1. Open VSCode in a Decentraland scene project.
2. Click on the Debugger icon on the left sidebar.
3. Click on `Run and Debug` and select `Decentraland` (this step is not necessary if your project already has a `.vscode/launch.json` file).
4. Click on `Run`. A browser should open.
5. Try setting a breakpoint and interacting with the scene in a way it will step on that line.

## View scene stats

Open the scene's stats by running `/debug` on the chat panel. This opens a panel with information about the renderer engine, and is updated in real time as things change.

### FPS

The first section shows the renderer's _FPS_ (Frames Per Second). This value will tend to be lower as the scene grows in complexity, try to always keep this value above 25 FPS, to ensure a good experience for your players. The FPS will vary depending on the machine you run this in.

{{< hint warning >}}
**ðŸ“” Note**: The renderer's FPS is not the same as the scene's updates of the game loop per second. The scene's logic is capped at 30 FPS, the renderer's FPS can go up to 60 or more.
{{< /hint >}}

### Memory JS

The second section displays the memory use on the browser. Always try to keep this value below 1 GB. If this value grows too much, it risks crashing the browser for players visiting your scene. Keep in mind that in production, the scene might be loaded together with other surrounding scenes and players, which can all contribute to the memory consumption.

<!-- ### General

The third section includes general information about how the scene is running. What Catalyst realm, and what Ethereum network is being used, also how many other players are around currently being rendered.

### Scene

This section includes a lot of important stats about your scene's rendering:

- Processed Messages %
- Pending on Queue
- Poly
- Textures
- Materials
- Entities
- Meshes
- Bodies
- Components

The processed messages and message queue refer to the messages sent by your scene's code to the engine. These are useful to know if your scene is running more operations than the engine can support. If many messages get queued up, that's usually a bad sign.

The other numbers in the panel refer to the usage of resources, they display the total count of each item that's currently being managed in memory. Compare these values to the [scene limitations]({{< ref "/content/creator/sdk7/optimizing/scene-limitations.md" >}}). Keep in mind that the maximum allowed number for these values is proportional to the amount of parcels in the scene. If your scene tries to render an entity that exceeds these values, for example if it has too many triangles, it risks being too heavy to run for players in the scene.

{{< hint warning >}}
**ðŸ“” Note**: Keeping this panel open can negatively impact the frame rate and performance of your scene, so we recommend closing it while not in use.
{{< /hint >}} -->

## Report a bug

If you encounter a problem that is not with your scene, but instead with the Decentraland SDK in general, please see [Report a bug]({{< ref "/content/creator/sdk7/debugging/report-bug.md">}}).

<!--
## Run code only in preview

You can detect if a scene is running as a preview or is already deployed in production, so that the same code behaves differently depending on the case. You can use this to add debugging logic to your code without the risk of forgetting to remove it and having it show in production.

To use this function, import the `~system/EnvironmentAPI` library.

```ts
import { isPreviewMode } from "~system/EnvironmentAPI"

executeTask(async () => {
  const preview: boolean = await isPreviewMode({})

  if (preview){
    console.log("Running in preview")
  }
})
```

{{< hint warning >}}
**ðŸ“” Note**:  `isPreviewMode()` needs to be run as an [async function]({{< ref "/content/creator/sdk7/programming-patterns/async-functions.md" >}}), since the response may delay in returning data.
{{< /hint >}} -->

## Dependency versions

Running a Decentraland scene locally depends on two main libraries: `@dcl/sdk` and `@dcl/js-runtime`, which is installed on each project folder. Make sure both of those are up to date, as any issues you're experiencing might already be fixed in newer versions. There may also be compatibility problems when attempting to run with one of these two outdated and the other up to date. You can run the following commands to update both these libraries to the latest stable version:

```
npm i @dcl/js-runtime@latest
npm i @dcl/sdk@latest
```

If your scene uses smart items, it may also be using the `@dcl/asset-packs` library, which you can update via:

```
npm i @dcl/asset-packs@latest
```

If you're using any of the [utils libraries](https://studios.decentraland.org/resources?sdk_version=SDK7&resource_type=Library) make sure those are also up to date, as older versions of these libraries may not be compatible with newer versions of `@dcl/sdk`.

### Web previews

Each `@dcl/sdk` version is paired with its corresponding versions of the renderer to run a web-based preview. If using an outdated version of the SDK, this may differ from the latest version of the renderer that users will experience when the scene is published. You can force your preview to use a different version of the `explorer` by simply providing the url parameters `explorer-branch`. For example `explorer-branch=latest` will use what's currently in production. You can also use `explorer-branch=dev` to test with the unpublished version, which may be unstable.

<!--
## View collision meshes

While viewing the preview, you can press `c` to view any collision meshes loaded in the glTF models of the scene. These are usually invisible, but determine where an avatar can move through, and where it can't.

![](/images/media/collision-meshes.png)

Collision meshes can be added to any model in an external 3D modeling tool like Blender. Large models like houses often include these, they are usually a lot simpler geometrically than the original shape, as this implies much less computational requirements. Stairs typically use a simplified collision mesh like a ramp to make it easier to climb. See [colliders](/creator/3d-modeling/colliders) for more details.

-->

## Lighting conditions

The in-world time of day has a big impact on how 3D models look. The color of the light source changes subtly, having a bluish tint at night, and a reddish tint during sunrise and sunset. The direction of the light also moves across the sky, casting shadows in different directions.

Check that your scene looks good at all times of day by switching the game clock to different values. Open the settings panel, and in the **General** tab set the **skybox time** to any time you prefer. If this slider is grayed out, make sure that the **Dynamic skybox** option is disabled.

<figure>
    <img src="/images/media/dynamic-skybox.png" alt="Dynamic skybox" width="300"/>
    <figcaption>In-world instructions</figcaption>
</figure>

Your 3D model's materials might not look the same as they did in the modeling tool you created it with. This is to be expected, as all 3D rendering engines have subtle differences in how they deal with light and materials.

## Avatars and accounts

When opening a preview, you connect via your Metamask account, so you can have access to all your owned wearables and tokens.

{{< hint warning >}}
**ðŸ“” Note**: When running a preview with the legacy web explorer, by default you run with a **guest** account. You're assigned a random base avatar each time you reload.

To run a web preview with a Web3 account with the CLI, start the preview with:

```
npm run start -- --web3
```

Alternatively, you can manually add the URL parameter `&ENABLE_WEB3` to the URL in the browser window.
{{< /hint >}}

## Using the Ethereum test network

You can avoid using real currency while previewing the scene. For this, you must use the _Ethereum Sepolia test network_ and transfer fake MANA instead. To use the test network you must set your Metamask Chrome extension to use the _Sepolia test network_ instead of _Main network_. You must also own MANA in the Sepolia blockchain, which you can acquire for free from Decentraland.

Any transactions that you accept while viewing the scene in this mode will only occur in the test network and not affect the MANA balance in your real wallet.

## Multiplayer testing

{{< hint warning >}}
**ðŸ“” Note**: Currently you can only open one window at a time for the desktop explorer.
{{< /hint >}}

When opening the web explorer, if you open a second preview window on your machine, you will enter the scene with a different avatar. The avatars on both tabs will be able to see each other and interact, although currently they might have inconsistent names and wearables on.

{{< hint warning >}}
**ðŸ“” Note**: You can't open multiple tabs using the same account. So if your URL has a hardcoded `PLAYER` parameter with the same string on multiple tabs, or you're connecting to Metamask on more than one tab, it won't be possible to load them all. Each simultaneous tab should load a different account.
{{< /hint >}}

If the scene uses the MessageBus to send messages between players, these will work between the different tabs.

If the scene connects to a third party server via websockets, these connections should also work independently on each tab, as separate players.
